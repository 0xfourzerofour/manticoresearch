#!/bin/sh
# postinst script for manticore
#
# see: dh_installdeb(1)

set -e

if ! getent group manticore >/dev/null; then
   addgroup --system manticore
fi
if ! getent passwd manticore >/dev/null; then
   adduser --system --ingroup manticore  --no-create-home --shell /bin/bash manticore
fi
DATADIR=/var/lib/manticore
LOGDIR=/var/log/manticore
RUNDIR=/var/run/manticore
SYSCONFDIR=/etc/sphinxsearch
chown manticore:manticore $DATADIR -R
chown manticore:manticore $LOGDIR -R
chown manticore:manticore $RUNDIR -R
chown manticore:manticore $SYSCONFDIR -R

case "$1" in
    configure|abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

#add manticore init script to system start

#update-rc.d manticore defaults
echo ""
echo "Do not forget to reindex all indexes by running: indexer --all"
echo ""
#start manticore service

#invoke-rc.d manticore start
                        
# section below id distribute-specivic.
# It contains shell code generated by cmake cpack script.

@POSTINST_SPECIFIC@


exit 0
